### วาระสิ้นโลก

#### by pannxe

​	**ข้อนี้ต้องแบ่งออกเป็น 2 ขั้นตอน** ตอนแรกคือการเขียนแผนที่ใหม่หลังน้ำท่วมโลกแล้ว วิธีทำง่าย ๆ คือสร้าง array ใหม่ไว้เก็บแผนที่โลกหลังน้ำท่วม  ส่วนขั้นตอนที่สองก็คือการปรินต์ออกมาเฉพาะส่วนแผ่นดิน ซึ่งเราก็สามารถเช็กหาค่ามาก / น้อยที่สุดของตำแหน่ง x, y ของแผ่นดินที่เหลืออยู่ได้ตอนเราสร้างแผนที่โลกใหม่ และก็ปรินต์ออกมาแค่นั้น

``` c
#include <stdio.h>
#define max(x,y) ((x)>(y)?(x):(y))
#define min(x,y) ((x)<(y)?(x):(y))

// กำหนดค่า min ให้เยอะเกินขอบเขต
// กำหนดค่า max ให้น้อยเท่าที่จะเป็นได้
int min_x = 99, max_x = 0,
    min_y = 99, max_y = 0;

char world[12][12], new_world[12][12];

// เอาไว้อัพเดตค่า min และ max ของแกนพิกัด x, y ของแผ่นดิน
void update(int x, int y) {
    max_x = max(x, max_x);
    max_y = max(y, max_y);
    min_x = min(x, min_x);
    min_y = min(y, min_y);
}

int main() {
    int r, c;
    scanf("%d %d", &r, &c);
    for (int i = 0; i<r; i++) {
        scanf("%s", world[i]);
    }
    
    // กำหนดทิศทางที่ต้องการเช็คหาน้ำ (บน ล่าง ซ้าย ขวา)
    // จริง ๆ จะไล่เช็กเลยก็ได้ แต่เขียนแบบนี้สะอาดกว่า
    const int dx[] = {0, 0, -1, 1},
              dy[] = {1, -1, 0, 0};
    
    // วนเช็กทุกตัวในแผนที่โลกที่รับมา
    for (int y = 0; y < r; y++) {
        for (int x = 0; x < c; x++) {
            
            // ถ้าเป็นน้ำอยู่แล้วก็ให้เ็นน้ำเหมือนเดิมในแผนที่โลกอันใหม่
            if (world[y][x] == '.') {
                new_world[y][x] = '.';
                continue;
            }
            // ถ้าเป็นแผ่นดินเราจะไล่เช็กว่ามีน้ำล้อมรอบที่ฝั่ง
            // โดยเราก็เช็กหาน้ำรอบทิศธรรมดา ๆ ถ้าเจอก็ให้ตัวแปร cnt + 1
            int cnt = 0;
            for (int i = 0; i < 4; i++) {
                if (world[y+dy[i]][x+dx[i]] == '.')
                    cnt ++;
            }
            // ถ้าหากมีน้ำล้อม >= 3 ฝั่งแล้ว
            if (cnt >= 3)
                // ให้แผนที่โลกใหม่ของตำแหน่งนี้เป็นน้ำ
                new_world[y][x] = '.';
            else {
                // ถ้าแผ่นดินยังเหลือรอดให้นำพิกัดของแผ่นดินนี้ไปเทียบกับค่า x, y 
                // ของแผ่นดินของแผนที่ใหม่ ถ้าหากมีพิกัดใดอยู่เกินขอบเขตเดิมก็ให้ขยายขอบเขตออก
                update(x, y);
                // ให้พิกัดนี้เป็นแผ่นดินในแผนทีใหม่
                new_world[y][x] = 'X';
            }
        }
    }
    // ไล่ปรินต์จากขอบเขตที่เราหาได้
    for (int y = min_y; y <= max_y; y++) {
        for (int x = min_x; x <= max_x; x++)
            printf("%c", new_world[y][x]);
        printf("\n");
    }
    return 0;
}

```

